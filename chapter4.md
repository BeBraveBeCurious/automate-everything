# 页面记载性能优化
在互联网网站百花齐放的今天，网站响应速度是用户体验的第一要素，其重要性不言而喻，这里有几个关于响应时间的重要条件：

用户在浏览网页时，不会注意到少于0.1秒的延迟；

少于1秒的延迟不会中断用户的正常思维， 但是一些延迟会被用户注意到；

延迟时间少于10秒，用户会继续等待响应；

延迟时间超过10秒后，用户将会放弃并开始其他操作；

因此大家都开始注重性能优化，很多厂商都开始做一些性能优化。比较有名的是雅虎军规，不过随着浏览器和协议等的发展，有一些已经逐渐被淘汰了。因此建议大家以历史的目光看待它。比如.尽量减少HTTP请求数这一条，在HTTP2协议下就不管用了，因为HTTP2实现了HTTP复用，HTTP请求变少，反而降低性能。因此一定要结合历史环境看待具体的优化原则和手段，否则会适得其反。

## 一个经典问题
1. 浏览器调用loadUrl解析url
2. 浏览器调用DNS模块，如果本地游dns缓存则直接返回IP。 否则查询本机DNS，并逐层往上查找。返回IP则将其存到DNS缓存并设置过期时间。

> chrome://dns/ 可以查看chrome缓存的dns记录

3. 浏览器调用网络模块。 网络模块和目标IP 建立TCP连接，途中经过三次握手。

4. 浏览器发送http请求，请求格式如下：

```js
header
(空行)
body
```

5. 请求到达目标机器，并通过端口与目标web server 建立连接。

6. web server 获取到请求流，并对请求流进行解析，最终返回响应流到前端。

7. 前端根据相应的内容，下载文档（content download），并对文档进行解析。解析的过程如下所示：

![图4.1](https://github.com/azl397985856/automate-everything/blob/master/illustrations/%E5%9B%BE4.1.png)

## 浏览器性能指标


### 几个关键的指标


## 性能监测的手段


## 性能优化的手段
